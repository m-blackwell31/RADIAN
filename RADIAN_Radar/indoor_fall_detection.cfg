% ================================================================
% Indoor people tracking (AWR6843ISK, SDK 3.x)
% - ~9 m max range, ~3 m/s max radial velocity, ~10 Hz frame rate
% - Output = UART TLVs (point cloud), no LVDS
% - CFAR uses dB thresholds and embeds peak grouping (per your firmware)
% ================================================================

sensorStop                         % stop sensor if running (safe reset)
flushCfg                           % clear any prior configuration in RAM

% -------- Data path / output mode --------
dfeDataOutputMode 1                % 1 = frame-based processing (standard OOB demo)

% -------- RF channels / ADC --------
channelCfg 15 7 0                  % enable Rx/Tx: 15=all 4 Rx, 7=Tx0..Tx2, BPM off
adcCfg 2 1                         % ADC: 12-bit (2), real-only samples (1)
adcbufCfg -1 0 1 1 1               % ADC buffer: sigMode, 16-bit, IQ swap on, channel interleave on

% -------- Profile (range resolution, sweep BW) --------
% profileCfg <id> <startFreqGHz> <idleTime> <adcStart> <rampEnd> <txPow> <txPhase> <freqSlope(MHz/us)>
%            <txStart> <numAdcSamples> <digOutRate(ksps)> <hp1> <hp2> <rxGain>
profileCfg 0 60 7 3 60 0 0 50 1 256 5000 0 0 30   % ~4–5 cm range resolution, suitable for indoor

% -------- Chirps (3 chirps → 3 Tx → virtual array) --------
chirpCfg 0 0 0 0 0 0 0 1           % chirp 0 uses Tx0
chirpCfg 1 1 0 0 0 0 0 2           % chirp 1 uses Tx1
chirpCfg 2 2 0 0 0 0 0 4           % chirp 2 uses Tx2

% -------- Frame (Doppler setup, frame rate) --------
% frameCfg <chirpStart> <chirpEnd> <numLoops> <numFrames> <period(ms)> <trigger> <dummy>
frameCfg 0 2 32 0 100 1 0          % 3 chirps/loop, 32 loops → Doppler bins; 10 Hz; run forever

lowPower 0 0                       % keep full performance (no low-power gating)

% -------- GUI / TLV selection (UART) --------
% guiMonitor <subFrame(-1=all)> <detObj> <logMagRange> <noiseProfile> <rangeAzimuthHeatmap> <rangeDopplerHeatmap> <stats>
guiMonitor -1 1 1 1 0 0 1          % point cloud + a couple small stats; no heatmaps

% -------- Detection (CFAR + grouping) --------
% cfarCfg: <sfIdx> <procDir[0=range,1=dopp]> <avgMode> <winLen> <guardLen> <noiseDiv> <cyclic> <thr_dB> <peakGroupingEn>
cfarCfg -1 0 2 8 4 3 0 20 1        % range CFAR: SO-CFAR(avgMode=2), thr=20 dB, grouping enabled
cfarCfg -1 1 2 4 4 3 0 20 1        % doppler CFAR: SO-CFAR(avgMode=2), thr=20 dB, grouping enabled
multiObjBeamForming -1 1 0.5       % enable multi-object BF, threshold 0.5 (fraction of peak)
clutterRemoval -1 1                % remove static clutter (walls/furniture)

% -------- Calibration / health monitors --------
calibDcRangeSig -1 0 -5 8 256      % DC range signal calibration off at start (0), bins window if enabled
extendedMaxVelocity -1 0           % standard max velocity (no doubling)
bpmCfg -1 0 0 1                    % BPM disabled (we already map chirps to distinct Tx)
lvdsStreamCfg -1 0 0 0             % LVDS off (we use UART)
compRangeBiasAndRxChanPhase 0.0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0  % default comp (no saved calib)
measureRangeBiasAndRxChanPhase 0 1.5 0.2  % offline measurement disabled; params retained
CQRxSatMonitor 0 3 5 121 0         % RX saturation monitor
CQSigImgMonitor 0 127 4            % signal/image band monitor
analogMonitor 0 0                   % analog monitor config

% -------- Field of view constraints --------
aoaFovCfg -1 -90 90 -90 90         % AoA FOV: full azimuth/elevation (deg)
cfarFovCfg -1 0 0 8.92             % Range FOV: 0..~9 m
cfarFovCfg -1 1 -3.04 3.04         % Velocity FOV: ±3.04 m/s

% -------- Persisted calibration (optional) --------
calibData 0 0 0                    % do not save/load calib from flash

sensorStart                         % start streaming frames
